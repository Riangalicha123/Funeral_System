{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport navbottom from \"@/components/navbottom.vue\";\nimport { jwtDecode as jwt_decode } from \"jwt-decode\";\nimport axios from 'axios';\nexport default {\n  components: {\n    navbottom\n  },\n  data() {\n    return {\n      Email: \"\",\n      Password: \"\",\n      validationErrors: {\n        email: null,\n        password: null\n      },\n      snackbar: false,\n      snackbarMessage: \"\"\n    };\n  },\n  methods: {\n    async login() {\n      this.validationErrors = {\n        email: null,\n        password: null\n      };\n\n      // Validate email\n      if (!this.Email) {\n        this.validationErrors.email = \"Email is required.\";\n      }\n\n      // Validate password\n      if (!this.Password) {\n        this.validationErrors.password = \"Password is required.\";\n      }\n\n      // If there are validation errors, stop the login process\n      if (this.validationHasErrors()) {\n        return;\n      }\n      try {\n        const response = await axios.post(\"/loginAuth\", {\n          Email: this.Email,\n          Password: this.Password\n        });\n        sessionStorage.setItem('token', response.data.token);\n        const decodedToken = jwt_decode(response.data.token);\n        const userRole = decodedToken.aud;\n        switch (userRole) {\n          case \"PlanHolder\":\n            this.$router.push('/');\n            break;\n          case \"Agent\":\n            this.$router.push('/agent');\n            break;\n          case \"Admin\":\n            this.$router.push('/admin');\n            break;\n          default:\n            this.$router.push('/login');\n        }\n      } catch (error) {\n        // Handle errors\n        console.error(\"Error during login:\", error);\n        this.snackbarMessage = \"Invalid email or password.\";\n        this.snackbar = true;\n      }\n    },\n    validationHasErrors() {\n      // Check if there are any validation errors\n      return Object.values(this.validationErrors).some(error => error !== null);\n    }\n  }\n};","map":{"version":3,"names":["navbottom","jwtDecode","jwt_decode","axios","components","data","Email","Password","validationErrors","email","password","snackbar","snackbarMessage","methods","login","validationHasErrors","response","post","sessionStorage","setItem","token","decodedToken","userRole","aud","$router","push","error","console","Object","values","some"],"sources":["C:\\laragon\\www\\GitHub\\Funeral_System\\src\\views\\Login.vue"],"sourcesContent":["<template>\r\n\r\n\r\n  <v-app>\r\n    \r\n      <v-snackbar v-model=\"snackbar\" :timeout=\"3000\">\r\n    {{ snackbarMessage }}\r\n    <v-btn color=\"error\" text @click=\"snackbar = false\">Close</v-btn>\r\n  </v-snackbar>\r\n  <v-container>\r\n    <v-row justify=\"center\" align=\"center\" class=\"h-100\">\r\n        <v-col>\r\n          <v-card class=\"elevation-3\" shaped>\r\n            <v-row no-gutters>\r\n              <!-- Left Column (Image) -->\r\n              <v-col md=\"6\" lg=\"5\" class=\"d-none d-md-block\">\r\n                <v-img\r\n                  :width=\"500\"\r\n                  :height=\"430\"\r\n                  aspect-ratio=\"16/9\"\r\n                  cover\r\n                  src=\"https://cdn.vuetifyjs.com/images/parallax/material.jpg\"\r\n                ></v-img>\r\n              </v-col>\r\n\r\n              <!-- Right Column (Login Form) -->\r\n              <v-col md=\"6\" lg=\"7\" class=\"d-flex align-center\">\r\n                <v-card-text class=\"text-black\">\r\n                  <v-form @submit.prevent=\"login\">\r\n                    <v-card-title class=\"title\">Login</v-card-title>\r\n                    <v-card-subtitle class=\"message\"\r\n                      >Login to access your account.</v-card-subtitle\r\n                    >\r\n                    <br />\r\n                    <!-- Email Field -->\r\n                    <v-row>\r\n                      <v-col cols=\"12\">\r\n                        <v-text-field\r\n                          v-model=\"Email\"\r\n                          label=\"Email\"\r\n                          required\r\n                          type=\"email\"\r\n                          :error-messages=\"validationErrors.email ? [validationErrors.email] : []\"\r\n                        ></v-text-field>\r\n                        <v-messages :value=\"validationErrors.email\"></v-messages>\r\n                      </v-col>\r\n                    </v-row>\r\n                    <!-- Password Field -->\r\n                    <v-row>\r\n                      <v-col cols=\"12\">\r\n                        <v-text-field\r\n                          v-model=\"Password\"\r\n                          label=\"Password\"\r\n                          required\r\n                          type=\"password\"\r\n                          :error-messages=\"validationErrors.password ? [validationErrors.password] : []\"\r\n                        ></v-text-field>\r\n                        <v-messages :value=\"validationErrors.password\"></v-messages>\r\n                      </v-col>\r\n                    </v-row>\r\n                    <!-- Submit Button -->\r\n                    <v-row>\r\n                      <v-col cols=\"12\">\r\n                        <v-btn type=\"submit\" class=\"royal-blue-button\"\r\n                          >Login</v-btn\r\n                        >\r\n                      </v-col>\r\n                      <v-col cols=\"12\">\r\n                        <v-card-subtitle class=\"signin\">\r\n                          Don't have an account?\r\n                          <router-link to=\"/register\">Sign up</router-link>\r\n                        </v-card-subtitle>\r\n                      </v-col>\r\n                    </v-row>\r\n                  </v-form>\r\n                </v-card-text>\r\n              </v-col>\r\n            </v-row>\r\n          </v-card>\r\n        </v-col>\r\n      </v-row>\r\n    </v-container>\r\n      \r\n    <navbottom />\r\n  </v-app>\r\n</template>\r\n\r\n<script>\r\nimport navbottom from \"@/components/navbottom.vue\";\r\nimport { jwtDecode as jwt_decode } from \"jwt-decode\";\r\nimport axios from 'axios';\r\nexport default {\r\n  components: {\r\n    navbottom,\r\n  },\r\n  data() {\r\n    return {\r\n      Email: \"\",\r\n      Password: \"\",\r\n      validationErrors: {\r\n      email: null,\r\n      password: null,\r\n    },\r\n    snackbar: false,\r\n      snackbarMessage: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    \r\n    async login() {\r\n      this.validationErrors = {\r\n    email: null,\r\n    password: null,\r\n  };\r\n\r\n  // Validate email\r\n  if (!this.Email) {\r\n    this.validationErrors.email = \"Email is required.\";\r\n  }\r\n\r\n  // Validate password\r\n  if (!this.Password) {\r\n    this.validationErrors.password = \"Password is required.\";\r\n  }\r\n\r\n  // If there are validation errors, stop the login process\r\n  if (this.validationHasErrors()) {\r\n    return;\r\n  }\r\n      try {\r\n        const response = await axios.post(\"/loginAuth\", {\r\n          Email: this.Email,\r\n          Password: this.Password,\r\n        });\r\n        sessionStorage.setItem('token', response.data.token);\r\n        const decodedToken = jwt_decode(response.data.token);\r\n        const userRole = decodedToken.aud;\r\n\r\n\r\n        switch (userRole) {\r\n          case \"PlanHolder\":\r\n            this.$router.push('/');\r\n            break;\r\n          case \"Agent\":\r\n            this.$router.push('/agent');\r\n            break;\r\n          case \"Admin\":\r\n            this.$router.push('/admin');\r\n            break;\r\n          default:\r\n            this.$router.push('/login');\r\n        }\r\n      } catch (error) {\r\n        // Handle errors\r\n        console.error(\"Error during login:\", error);\r\n\r\n        this.snackbarMessage = \"Invalid email or password.\";\r\n        this.snackbar = true;\r\n      }\r\n    },\r\n    validationHasErrors() {\r\n  // Check if there are any validation errors\r\n  return Object.values(this.validationErrors).some(error => error !== null);\r\n},\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n/* Your CSS styles here */\r\n.container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100vh;\r\n  width: 100%;\r\n  text-align: center;\r\n  margin: 2%;\r\n}\r\n.royal-blue-button {\r\n  background-color: #5ce1e6;\r\n  color: white;\r\n  width: 190%;\r\n  height: 100%;\r\n  font-size: 20px;\r\n  padding: 15px;\r\n  text-align: center;\r\n}\r\n.v-card-text {\r\n  background: linear-gradient(#ffffff, #ffffff, #5ce1e6, #5ce1e6);\r\n}\r\n\r\n.v-application {\r\n  background-image: url(\"https://t3.ftcdn.net/jpg/03/27/46/14/360_F_327461491_FWBhMuNNJLZQe1vXboG8eMu8uHGGZ2jf.jpg\");\r\n  background-size: cover;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  background-attachment: fixed;\r\n}\r\n\r\n/* Additional styles for the form */\r\n.title {\r\n  font-size: 24px; /* Adjust font size for mobile */\r\n  color: #5ce1e6;\r\n  font-weight: 600;\r\n  letter-spacing: -1px;\r\n  position: relative;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding-left: 30px;\r\n  transition: 0.3s ease;\r\n}\r\n\r\n.title::before,\r\n.title::after {\r\n  position: absolute;\r\n  content: \"\";\r\n  height: 16px;\r\n  width: 16px;\r\n  border-radius: 50%;\r\n  left: 35%;\r\n  background-color: #5ce1e6;\r\n  transform: translateX(-50%);\r\n}\r\n\r\n.title::before {\r\n  width: 18px;\r\n  height: 18px;\r\n  background-color: #5ce1e6;\r\n  transition: 0.3s ease;\r\n}\r\n\r\n.title::after {\r\n  content: \"\";\r\n  width: 15px;\r\n  height: 15px;\r\n  background-color: #5ce1e6;\r\n  border-radius: 50%;\r\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0);\r\n  transition: box-shadow 0.3s;\r\n}\r\n\r\n.title:hover::after {\r\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.message,\r\n.signin {\r\n  color: rgba(56, 53, 53, 0.822);\r\n  font-size: 16px; /* Adjust font size for mobile */\r\n  transition: 0.3s ease;\r\n  text-align: center; /* Centers the text horizontally */\r\n}\r\n.signin {\r\n  color: rgba(56, 53, 53, 0.822);\r\n  font-size: 16px;\r\n  text-align: center;\r\n}\r\n\r\n.signin {\r\n  text-align: center;\r\n  transition: 0.3s ease;\r\n}\r\n\r\n.signin a {\r\n  color: royalblue;\r\n  transition: 0.3s ease;\r\n}\r\n\r\n.signin a:hover {\r\n  text-decoration: underline royalblue;\r\n}\r\n\r\n.flex {\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 130%;\r\n  gap: 10px;\r\n}\r\n\r\n.form label {\r\n  position: relative;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.form label .input {\r\n  width: 100%;\r\n  padding: 10px 10px 20px 10px;\r\n  outline: 0;\r\n  border: 1px solid darkgrey;\r\n  border-radius: 10px;\r\n  transition: 0.3s ease;\r\n}\r\n\r\n.form label .input + span {\r\n  position: absolute;\r\n  left: 10px;\r\n  top: 15px;\r\n  color: darkgray;\r\n  font-size: 0.9em;\r\n  cursor: text;\r\n  transition: 0.3s ease;\r\n}\r\n\r\n.form label .input:placeholder-shown + span {\r\n  top: 15px;\r\n  font-size: 0.9em;\r\n  transition: 0.3s ease;\r\n}\r\n\r\n.form label .input:focus + span,\r\n.form label .input:valid + span {\r\n  top: 0px;\r\n  font-size: 0.7em;\r\n  font-weight: 600;\r\n  transition: 0.3s ease;\r\n}\r\n\r\n.form label .input:valid + span {\r\n  color: darkgray;\r\n  transition: 0.3s ease;\r\n}\r\n\r\n.submit {\r\n  border: none;\r\n  outline: none;\r\n  background-color: royalblue;\r\n  padding: 10px;\r\n  border-radius: 10px;\r\n  color: #fff;\r\n  font-size: 16px;\r\n  transition: 0.3s ease;\r\n  width: 130%;\r\n}\r\n\r\n.submit:hover {\r\n  background-color: rgba(11, 69, 243, 0.9);\r\n  cursor: pointer;\r\n  transition: 0.3s ease;\r\n}\r\n.v-messages {\r\n  font-size: 14px;\r\n  color: red;\r\n  margin-top: 5px;\r\n}\r\n</style>"],"mappings":";AAwFA,OAAOA,SAAQ,MAAO,4BAA4B;AAClD,SAASC,SAAQ,IAAKC,UAAS,QAAS,YAAY;AACpD,OAAOC,KAAI,MAAO,OAAO;AACzB,eAAe;EACbC,UAAU,EAAE;IACVJ;EACF,CAAC;EACDK,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE,EAAE;MACZC,gBAAgB,EAAE;QAClBC,KAAK,EAAE,IAAI;QACXC,QAAQ,EAAE;MACZ,CAAC;MACDC,QAAQ,EAAE,KAAK;MACbC,eAAe,EAAE;IACnB,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IAEP,MAAMC,KAAKA,CAAA,EAAG;MACZ,IAAI,CAACN,gBAAe,GAAI;QAC1BC,KAAK,EAAE,IAAI;QACXC,QAAQ,EAAE;MACZ,CAAC;;MAED;MACA,IAAI,CAAC,IAAI,CAACJ,KAAK,EAAE;QACf,IAAI,CAACE,gBAAgB,CAACC,KAAI,GAAI,oBAAoB;MACpD;;MAEA;MACA,IAAI,CAAC,IAAI,CAACF,QAAQ,EAAE;QAClB,IAAI,CAACC,gBAAgB,CAACE,QAAO,GAAI,uBAAuB;MAC1D;;MAEA;MACA,IAAI,IAAI,CAACK,mBAAmB,CAAC,CAAC,EAAE;QAC9B;MACF;MACI,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMb,KAAK,CAACc,IAAI,CAAC,YAAY,EAAE;UAC9CX,KAAK,EAAE,IAAI,CAACA,KAAK;UACjBC,QAAQ,EAAE,IAAI,CAACA;QACjB,CAAC,CAAC;QACFW,cAAc,CAACC,OAAO,CAAC,OAAO,EAAEH,QAAQ,CAACX,IAAI,CAACe,KAAK,CAAC;QACpD,MAAMC,YAAW,GAAInB,UAAU,CAACc,QAAQ,CAACX,IAAI,CAACe,KAAK,CAAC;QACpD,MAAME,QAAO,GAAID,YAAY,CAACE,GAAG;QAGjC,QAAQD,QAAQ;UACd,KAAK,YAAY;YACf,IAAI,CAACE,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC;YACtB;UACF,KAAK,OAAO;YACV,IAAI,CAACD,OAAO,CAACC,IAAI,CAAC,QAAQ,CAAC;YAC3B;UACF,KAAK,OAAO;YACV,IAAI,CAACD,OAAO,CAACC,IAAI,CAAC,QAAQ,CAAC;YAC3B;UACF;YACE,IAAI,CAACD,OAAO,CAACC,IAAI,CAAC,QAAQ,CAAC;QAC/B;MACF,EAAE,OAAOC,KAAK,EAAE;QACd;QACAC,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;QAE3C,IAAI,CAACd,eAAc,GAAI,4BAA4B;QACnD,IAAI,CAACD,QAAO,GAAI,IAAI;MACtB;IACF,CAAC;IACDI,mBAAmBA,CAAA,EAAG;MACxB;MACA,OAAOa,MAAM,CAACC,MAAM,CAAC,IAAI,CAACrB,gBAAgB,CAAC,CAACsB,IAAI,CAACJ,KAAI,IAAKA,KAAI,KAAM,IAAI,CAAC;IAC3E;EACE;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}